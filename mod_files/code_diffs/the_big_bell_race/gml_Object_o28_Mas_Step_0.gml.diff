*** original_scripts/the_big_bell_race/gml_Object_o28_Mas_Step_0.gml	Fri Sep 12 15:29:48 2025
--- ufo50_modded_scripts/the_big_bell_race/gml_Object_o28_Mas_Step_0.gml	Fri Sep 12 15:34:19 2025
***************
*** 2,71 ****
  {
!     scrGetInput(0);
!     
!     if (naviSel[0] == 0)
!     {
!         if (pressLeft)
!         {
!             scrSfx(sfx_navi00, 40);
!             var np = navi[0];
!             
!             while (navi[0] == np || navi[0] == navi[1])
!             {
!                 navi[0]--;
!                 
!                 if (navi[0] < 0)
!                     navi[0] = 5;
!             }
!         }
!         else if (pressRight)
!         {
!             scrSfx(sfx_navi00, 40);
!             var np = navi[0];
!             
!             while (navi[0] == np || navi[0] == navi[1])
!             {
!                 navi[0]++;
!                 
!                 if (navi[0] > 5)
!                     navi[0] = 0;
!             }
!         }
!         else if (fire2pressed)
!         {
!             if (naviSel[0] == 0)
!             {
!                 mute(sfx_deselect00);
!                 scrSfx(sfx_select01, 45);
!                 naviSel[0] = 1;
!             }
!         }
!     }
!     else if (fire1pressed)
!     {
!         if (naviSel[0] == 1)
!         {
!             mute(sfx_select01);
!             scrSfx(sfx_deselect00, 45);
!             naviSel[0] = 0;
!             t = 0;
!         }
!     }
!     
!     scrGetInput(1);
!     
!     if (global.numPlayers == 1)
!     {
!         if (fire2pressed)
!         {
!             fire2pressed = false;
!             global.numPlayers = 2;
!             multip = true;
!             navi[1] = 1;
!             scrSfx(sfx_special05, 51);
!         }
!     }
!     
!     if (multip)
!     {
!         if (naviSel[1] == 0)
          {
--- 2,7 ----
  {
!     for (var i = 0; i < global.numPlayers; i++) {
!         scrGetInput(i);
!         
!         if (naviSel[i] == 0)
          {
***************
*** 74,84 ****
                  scrSfx(sfx_navi00, 40);
!                 var np = navi[1];
!                 
!                 while (navi[1] == np || navi[1] == navi[0])
!                 {
!                     navi[1]--;
!                     
!                     if (navi[1] < 0)
!                         navi[1] = 5;
!                 }
              }
--- 10,14 ----
                  scrSfx(sfx_navi00, 40);
!                 navi[i]--;
!                 if (navi[i] < 0)
!                     navi[i] = 5;
              }
***************
*** 87,97 ****
                  scrSfx(sfx_navi00, 40);
!                 var np = navi[1];
!                 
!                 while (navi[1] == np || navi[1] == navi[0])
!                 {
!                     navi[1]++;
!                     
!                     if (navi[1] > 5)
!                         navi[1] = 0;
!                 }
              }
--- 17,21 ----
                  scrSfx(sfx_navi00, 40);
!                 navi[i]++;
!                 if (navi[i] > 5)
!                     navi[i] = 0;
              }
***************
*** 99,105 ****
              {
!                 if (naviSel[1] == 0)
                  {
                      mute(sfx_deselect00);
                      scrSfx(sfx_select01, 45);
!                     naviSel[1] = 1;
                  }
--- 23,38 ----
              {
!                 selectablePlayerFound = true;
!                     
!                 for (var j = 0; j < global.numPlayers; j++) {
!                     if (i != j && navi[i] == navi[j] && naviSel[j] == 1) {
!                         selectablePlayerFound = false
!                     }
!                 }
! 
!                 if (selectablePlayerFound && naviSel[i] == 0)
                  {
+                     readies++;
                      mute(sfx_deselect00);
                      scrSfx(sfx_select01, 45);
!                     naviSel[i] = 1;
                  }
***************
*** 109,115 ****
          {
!             if (naviSel[1] == 1)
              {
                  mute(sfx_select01);
                  scrSfx(sfx_deselect00, 45);
!                 naviSel[1] = 0;
                  t = 0;
--- 42,49 ----
          {
!             if (naviSel[i] == 1)
              {
+                 readies--;
                  mute(sfx_select01);
                  scrSfx(sfx_deselect00, 45);
!                 naviSel[i] = 0;
                  t = 0;
***************
*** 121,123 ****
      {
!         if (!multip || naviSel[1] == 1)
          {
--- 55,57 ----
      {
!         if (!multip || readies == global.numPlayers)
          {
***************
*** 128,141 ****
                  playerSel[1] = navi[1];
!                 ds_grid_set(dsScore, 0, 5, playerSel[0]);
!                 
!                 if (multip)
!                 {
!                     ds_grid_set(dsScore, 0, 4, playerSel[1]);
!                     nShuf = 3;
!                 }
!                 else
!                 {
!                     while (ds_grid_get(dsScore, 0, 4) == ds_grid_get(dsScore, 0, 5))
!                         ds_grid_set(dsScore, 0, 4, scrIRandomRange(0, 5));
                  }
                  
--- 62,71 ----
                  playerSel[1] = navi[1];
! 
!                 for (var j = 0; j < global.numPlayers; j++) {
!                     playerSel[j] = navi[j];
!                     ds_grid_set(dsScore, 0, 5 - j, playerSel[j]);
                  }
+ 
+                 while (ds_grid_get(dsScore, 0, 4) == ds_grid_get(dsScore, 0, 5))
+                     ds_grid_set(dsScore, 0, 4, scrIRandomRange(0, 5));
                  
***************
*** 284,285 ****
--- 214,216 ----
          tLaunch = 0;
+         goalPos = 0;
          
***************
*** 315,316 ****
--- 246,267 ----
              }
+             else if (global.numPlayers >= 3 && uId == playerSel[2])
+             {
+                 racer[rCount].human = true;
+                 racer[rCount].num = 2;
+             }
+             else if (global.numPlayers >= 4 && uId == playerSel[3])
+             {
+                 racer[rCount].human = true;
+                 racer[rCount].num = 3;
+             }
+             else if (global.numPlayers >= 5 && uId == playerSel[4])
+             {
+                 racer[rCount].human = true;
+                 racer[rCount].num = 4;
+             }
+             else if (global.numPlayers >= 6 && uId == playerSel[5])
+             {
+                 racer[rCount].human = true;
+                 racer[rCount].num = 5;
+             }
              else
***************
*** 675,680 ****
  
  if (goalPos == 6)
  {
!     p1InGoal = false;
!     p2InGoal = false;
      goalPos = 0;
--- 626,640 ----
  
+ var allInGoal = true;
+ 
+ for (var i = 0; i < global.numPlayers; i++) {
+     if (!playerInGoal[i]) {
+         allInGoal = false;
+         break;
+     }
+ }
+ 
  if (goalPos == 6)
  {
!     playerInGoal[0] = false;
!     playerInGoal[1] = false;
      goalPos = 0;
***************
*** 685,687 ****
  }
! else if ((!multip && p1InGoal) || (multip && p1InGoal && p2InGoal))
  {
--- 645,647 ----
  }
! else if (allInGoal)
  {
